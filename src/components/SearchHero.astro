---
/**
 * SearchHero - Main homepage hero with search
 * Extracted from index.astro to support MDX-driven architecture
 */
import { getCollection } from 'astro:content';
import Search from './Search';

// Get all docs for search functionality
// Note: Astro's content layer caches this data, so multiple getCollection calls
// in different components don't cause duplicate fetches
const allDocs = await getCollection('docs');

// Prepare search data
const searchDocs = allDocs.map(doc => ({
  slug: doc.slug,
  title: doc.data.title,
  description: doc.data.description
}));
---

<header class="mb-20 text-center max-w-4xl mx-auto">
  <h1 class="text-5xl lg:text-6xl font-bold text-white mb-6 tracking-tight">
    goingdark.social Wiki
  </h1>
  <p class="text-xl text-text-muted mb-10 leading-relaxed max-w-2xl mx-auto">
    Documentation for our privacy-focused Mastodon instance
  </p>

  <!-- DOMINANT SEARCH BAR -->
  <div class="relative">
    <Search client:load docs={searchDocs} />
    <div class="mt-4 text-sm text-text-subtle flex items-center justify-center gap-2">
      <kbd class="px-3 py-1.5 bg-surface-800 rounded-lg text-text-muted font-mono text-xs font-semibold">Ctrl+K</kbd>
      <span>to search</span>
    </div>
  </div>
</header>
